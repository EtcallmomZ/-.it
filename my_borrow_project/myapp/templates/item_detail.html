{% extends 'base.html' %} 

{% block content %}
<div class="row mt-5">
    <div class="col-md-7">
        <h1 class="mb-3">{{ item.name }}</h1>
        <p class="lead">{{ item.description }}</p>
        <hr>
        <p><strong>รหัสสินค้า:</strong> {{ item.serial_number }}</p>
        
        <h4 class="mt-4">
            สถานะปัจจุบัน: 
            {% if item.total_stock > 0 %}
                <span class="badge bg-success fs-5">{{ item.total_stock }} ชิ้น พร้อมให้ยืม</span>
            {% else %}
                <span class="badge bg-danger fs-5">ไม่ว่างให้ยืม</span>
            {% endif %}
        </h4>
    </div>
    <div class="col-md-5">
        <div class="card p-4 shadow-lg bg-light">
            <h3>พร้อมยืมหรือไม่?</h3>
            <p>เมื่อกด "ยืนยันการยืม" ระบบจะนำคุณไปกรอกแบบฟอร์ม (ต้อง Login ก่อน)</p>
            
            {% if item.total_stock > 0 %}
                <a href="{% url 'create_borrow_request' item.id %}" class="btn btn-success btn-lg mt-3">
                    ยืนยันการยืมสิ่งของนี้
                </a>
            {% else %}
                 <button class="btn btn-secondary btn-lg mt-3" disabled>
                    สินค้าหมดชั่วคราว
                </button>
            {% endif %}

        </div>
    </div>
</div>
<a href="{% url 'index' %}" class="btn btn-outline-secondary mt-5">
    &larr; กลับไปดูรายการทั้งหมด
</a>
{% endblock %}